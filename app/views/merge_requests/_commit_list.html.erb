<%
%>

<label>Select commits:</label>
<p class="hint">
  Select the range of commits you want to be included in the merge request
</p>

<% help_box(:middle, :error, {
    :id=>"large_selection_warning", :style=>"display:none;" }) do -%>
  <strong>Note:</strong> You have selected a large amounts of commits,
  make sure that you have selected the correct target and source branch you intend to
  merge with and from respectively.
<% end -%>

<table class="select_commits_from_list" id="commit_table">
  <tr>
    <th>To</th>
    <th>Summary</th>
    <th class="commit_list_status" colspan="2">No range selected yet</th>
  </tr>
<% @commits.each_with_index do |commit, i| %>
  <tr id="commit_<%= i -%>" class="commit_row">
    <td class="merge_to_container">
      <input 
        name="merge_request[ending_commit]" 
        id="merge_request_ending_commit"
        type="radio" 
        value="<%= commit.id -%>" 
        class="merge_to"
        <% if commit.id == @merge_request.ending_commit -%>
        checked="checked"
        <% end -%> />
    </td>
    <td class="commit-details meta">
      <ul>
        <li class="sha-abbrev"><%= link_to commit.id_abbrev, project_repository_commit_path(@project, @repository, commit) %></li>
        <li class="committer"><strong><%=h truncate(commit.committer.to_s, :length => 25) %></strong></li>
      </ul>
      <small><%= distance_of_time_in_words_to_now(commit.committed_date) %> ago</small>
    </td>
    <td class="commit-details message">
      <div class="commit_message inline">
        <%=h truncate(commit.short_message, :length => 140) %>
      </div>
    </td>
    <td class="selection">&nbsp;</td>
  </tr>
<% end %>
  <tr>
    <th></th>
    <th></th>
    <th class="commit_list_status" colspan="2">No range selected yet</th>
  </tr>
</table>

<div id="commit_selection_error" style="display:none">
  Please select which commit to start from and which to end at. The last 
  commit needs to be after the first one.
</div>
